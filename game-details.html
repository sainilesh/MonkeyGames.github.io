<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bree+Serif&family=Caveat:wght@400;700&family=Lobster&family=Monoton&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Playfair+Display+SC:ital,wght@0,400;0,700;1,700&family=Playfair+Display:ital,wght@0,400;0,700;1,700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&family=Source+Sans+Pro:ital,wght@0,400;0,700;1,700&family=Work+Sans:ital,wght@0,400;0,700;1,700&display=swap');
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #fff;
            margin: 0;
            display: flex;
        }
        .sidebar {
            width: 200px;
            background: #1e1e1e;
            padding: 20px;
            height: calc(100vh - 80px); /* Subtracts navbar height */
            position: fixed;
            top: 80px; /* Pushes it down below navbar */
            left: 0;
            
        }
        .sidebar .logo {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 20px;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar ul li {
            padding: 15px 10px;
            font-family: Bree Serif;
        }
        .sidebar ul li a {
            color: #bbb;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .sidebar ul li a i {
            margin-right: 10px;
        }
        .sidebar ul li.active a {
            color: #fff;
            font-weight: bold;    
        }
        .nav-bottom {
            margin-top: 30vh;
        }    
        .main-content {
        display: flex;
        flex-direction: column;
        align-items: left; /* Centers content horizontally */
        justify-content: startr; /* Centers content vertically */
        text-align: center;
        margin-left: 220px; /* Keep sidebar spacing */
        width: 83vw;
        
}
        .navbar {
        width: 100%;
        height: 80px; /* Ensures it doesn‚Äôt collapse */
        background: #1e1e1e;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
    }
    .search-bar {
    display: flex;
    align-items: center;
    background-color: #22243A; /* Slightly lighter than navbar */
    border-radius: 8px;
    padding: 5px;
    width: 300px;
    border: 1.5px solid #008FBA; /* Cyan-blue border */
    box-shadow: 0px 0px 8px rgba(0, 143, 186, 0.2); /* Soft cyan glow */
    margin-left: 1.5vw;
}

.search-bar input {
    background: transparent;
    border: none;
    outline: none;
    color: #E0E0E0; /* Light gray text */
    font-family: "Bree Serif", serif;
    font-size: 16px;
    padding: 8px;
    flex: 1; /* Takes up remaining space */
}

.search-bar input::placeholder {
    color: #B0B3C0; /* Subtle gray */
    font-style: italic;
}

.search-bar button {
    background-color: #008FBA; /* Cyan-blue */
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
}

.search-bar button i {
    color: #E0E0E0; /* Light gray icon */
    font-size: 18px;
}

.search-bar button:hover {
    background-color: #0078A0; /* Slightly darker cyan */
}

.search-bar button:active {
    transform: scale(0.95);
}

.subscribe-btn {
    background: linear-gradient(45deg, #ff416c, #ff4b2b);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    box-shadow: 0 4px 10px rgba(255, 75, 43, 0.5);
    margin-left: auto;
}
.subscribe-btn:hover {
    background: linear-gradient(45deg, #ff4b2b, #ff416c);
    box-shadow: 0 6px 15px rgba(255, 75, 43, 0.7);
    transform: scale(1.05);
}
.user-status {
            display: flex;
            align-items: center;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
        }
         .banner {
            width: 83vw; /* Adjust width for better centering */
            height: 100vh;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.5vw;
            z-index: -1;
}
        .banner-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .game-info {
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        .buy-btn {
    background-color: #008FBA; /* Vibrant Cyan-Blue */
    color: #E0E0E0; /* Light Gray for readability */
    font-family: "Bree Serif", serif;
    font-size: 18px;
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    text-decoration: none;
    display: inline-block;
    box-shadow: 0px 0px 10px rgba(0, 143, 186, 0.3); /* Soft cyan glow */
}

.buy-btn:hover {
    background-color: #0078A0; /* Darker cyan for hover */
    transform: scale(1.05); /* Smooth zoom-in effect */
}

.buy-btn:active {
    transform: scale(0.95); /* Click effect */
}

        .trailer {
            text-align: center;
            margin-top: 20px;
        }
        .related-games {
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        .related-game-grid {
            display: flex;
            gap: 20px;
            overflow-x: auto;
        }
        .related-game-card {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
        }
        .related-game-card img {
            width: 100%;
            border-radius: 10px;
        }
 .developers-grid {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
}
.developer-card {
    background-color: #11111f !important; /* Dark background (same as navbar) */
    border: 1.5px solid #008FBA; /* Cyan-blue border */
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    box-shadow: 0px 0px 10px rgba(0, 143, 186, 0.2); /* Soft cyan glow */
    transition: all 0.3s ease-in-out;
    max-width: 15vw; /* Adjust width */
    margin: 0px;
}

.developer-card:hover {
    transform: scale(1.05);
    box-shadow: 0px 0px 15px rgba(0, 143, 186, 0.4); /* Brighter glow */
}

.developer-img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
    box-shadow: 0px 0px 8px rgba(0, 143, 186, 0.3); /* Subtle glow */
}

.developer-card h3 {
    color: #E0E0E0; /* Light gray text */
    font-family: "Bree Serif", serif;
    font-size: 18px;
    margin-bottom: 5px;
}

.developer-card p {
    color: #B0B3C0; /* Soft gray for secondary text */
    font-size: 14px;
}

.game-info-container {
 display: flex;
 align-items: center;
 gap: 0px;
 padding: 20px;
}
.game-image {
 width: 200px;
height: 200px;
border-radius: 10px;
        }
        .game-info {
            flex: 2;
            margin-left: 2vw;
        }

        .view-more-btn {
    background-color: #2A2D45; /* Dark blue-gray */
    color: #B0B3C0; /* Soft gray text */
    font-family: "Bree Serif", serif;
    font-size: 16px;
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    text-decoration: none;
    display: inline-block;
}

.view-more-btn:hover {
    background-color: #363A56; /* Slightly lighter blue-gray */
    color: #E0E0E0; /* Brighter text on hover */
    transform: scale(1.05);
}

.view-more-btn:active {
    transform: scale(0.95);
}

#game-image {
    display: block;
    width: 50%;
   
    margin: 20px auto;
    border-radius: 10px;
    box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
}
#developers-list {
    display: flex;
    gap: 15px;
    flex-wrap: wrap; /* Allows wrapping if there are too many developers */
    justify-content: flex-start; /* Align items from the left */
}
.developer-card {
    display: flex;
    flex-direction: column; /* Keep content stacked inside the card */
    align-items: center;
    background: #222;
    border-radius: 8px;
    width: 15vw; /* Adjust width for a neat row */
    text-align: center;
    color: #fff;
    height: 35vh;
}
.developer-card img {
    width: 13vw; /* Adjust width as needed */
    height:18vh; /* Adjust height as needed */
    object-fit: cover; /* Ensures the image fills the box */
    border-radius: 8px; /* Slightly rounded corners for aesthetics */
}
.carousel img {
    border-radius: 10px;
    max-height: 500px;
    object-fit: cover;
}
.carousel-control-prev,
.carousel-control-next {
    background: none !important; /* Remove background */
    border: none !important;
    opacity: 0.5; /* Slight transparency */
    transition: opacity 0.3s ease-in-out;
}
.carousel-control-prev:hover,
.carousel-control-next:hover {
    opacity: 1; /* Fully visible on hover */
}
.carousel-control-prev-icon,
.carousel-control-next-icon {
    filter: invert(1) grayscale(100%); /* Makes the icons white */
}
.card {
    border-radius: 10px;
    background-color: #1e1e1e; /* Dark theme */
    color: white;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);  
    display: flex;
    align-items: center;
    justify-content: center; 
    
}
.content-card {
    width: 100%; /* Ensure it spans the full width */
    max-width: 100%; /* Prevent unnecessary constraints */
    height: auto; /* Adjust height as needed */
    position: absolute;
    padding: 20px; /* Maintain spacing */
    border-radius: 10px;
    background-color: #1e1e1e;
    color: white;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    box-sizing: border-box; /* Prevent padding from affecting width */
    overflow: hidden; /* Avoid content overflow */
    display: flex;
    flex-direction: column;
    z-index: 10;
    top: 60%;
    text-align: left;    
}
.container {
    width: 100%;
    max-width: 100%;
    padding: 0; /* Remove padding if necessary */
    margin: 0;
}
.requirements-container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-top: 10px;
}

.requirements-box {
    flex: 1;
    background-color: #202336;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0px 0px 10px rgba(0, 255, 255, 0.1); /* Cyan glow */
}
.ratings-container {
    box-shadow: 0px 0px 10px rgba(0, 255, 255, 0.1);
}
.watch-trailer-btn {
        background-color: #00FFFF;
        color: #1A1A2E;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        font-family: Bree Serif;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
        z-index: 10;
    }

    .watch-trailer-btn:hover {
        background-color: #00CCCC;
    }
/* Modal background */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0%;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

/* Modal content */
.modal-content {
    background-color: #1e1e2e;
    color: white;
    margin: auto;
    padding: 20px;
    border-radius: 10px;
    width: 80%;
    max-width: 400px;
    position: relative;
    top: 50px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    font-family: Bree Serif;
}

/* Close button */
.close {
    color: white;
    float: right;
    font-size: 0px;
    cursor: pointer;
}

/* Select & Textarea */
select, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 5px;
    border: none;
    background-color: #090217;
    color: white;
    margin-bottom: 10px;
}

/* Buttons */
.modal-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

#cancelBtn, #saveGameBtn {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#cancelBtn {
    background-color: #ff4444;
    color: white;
    border-radius: 10px;
}
#cancelBtn:hover {
    background-color: #780707;
}
#saveGameBtn {
    background-color: #4CAF50;
    color: white;
    border-radius: 10px;
}
#saveGameBtn:hover {
    background-color: #1b5a1e;
}
.genre-dropdown a {
    background: #202336;
    border-radius: 0px;
    padding-left: 10px;
    overflow-y: auto;
    font-family: Bree Serif;
    color: white;
    text-decoration: none;
    
    }
    .genre-item a {
    display: flex;
    align-items: center;
        padding: 8px;
    cursor: pointer;
    }
    .genre-item input {
    margin-right: 10px;
    }
    .category  {
        background-color: #202336;
        color: white;
        font-family: Bree Serif;
        border: none;
    }
    #genreList, #search-dropdown {
        max-height: 200px; /* Adjust height as needed */
        overflow-y: scroll;
        scrollbar-width: none; /* For Firefox */
        -ms-overflow-style: none; /* For Internet Explorer & Edge */
    }

    #genreList::-webkit-scrollbar, #search-dropdown::-webkit-scrollbar {
        width: 0px; 
        height: 0px;
        display: none; /* For Chrome, Safari, and Opera */
    }
    #search-dropdown {
        position: absolute;
        top: 100%; /* Place below the search bar */
        left: 0;
        width: 20%;
        background: #202336;
        margin-left: 16.5vw;
        border-radius: 10px;
        max-height: 200px;
        overflow-y: auto;
        display: none; /* Hide initially */
        z-index: 1000; /* Ensure it's above other elements */
    }

    .search-suggestion {
        padding: 10px;
        color: white;
        cursor: pointer;
        border-bottom: 1px solid #03032a;
        font-family: Bree Serif;
    }

    .search-suggestion:hover {
        background: #1ba7d6;
    }
    #search-dropdown {
        max-height: 300px; /* Adjust as needed */
        overflow-y: auto; /* Allows scrolling but hides scrollbar */
        scrollbar-width: none; /* Hides scrollbar in Firefox */
    }

    #search-dropdown::-webkit-scrollbar {
        width: 0px; /* Hides scrollbar in Chrome, Safari, and Edge */
        display: none;
    }
    </style>
</head>
<body style="background-color: #181825;">
    <!-- Sidebar -->
    <div class="sidebar" style="background-color: #1A1A2E;">
        <ul style="margin-top: 4.3vh;">
            <li><a href="index.html"><i class="fas fa-home" style="color: #E0E0E0;"></i> Home</a></li>
            <div class="sidebar-item">
                <button id="categoryDropdown" class="btn btn-secondary w-100 category" style="background-color: #1A1A2E;color: #bbb;text-align: left;font-family: Bree Serif;border: 0px;"><i class="fas fa-list"style="margin-right:10px"></i>Categories</button>
                <div id="genreList" class="genre-dropdown d-none" style="color: white;"></div>
              </div>
            <li><a href="mylist.html"><i class="fas fa-heart"></i> Wishlist</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    
        <!-- Top Navbar -->
        <header class="navbar" style="background-color: #1A1A2E;">
            
            <h2 class="logo" style="font-family: Bree Serif;">MonkeyGames</h2>
            <!-- Search Bar -->
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search for games..." autocomplete="off">
                <button><i class="fas fa-search"></i></button>
                <div id="search-dropdown" class="search-dropdown"></div>
            </div>
        
            <!-- Subscription Button -->
            <button class="subscribe-btn" style="font-family: Bree Serif;">Subscribe</button>
        
            <!-- User Status -->
            <div class="user-status">
                
                <img src="https://assets.onecompiler.app/4398p3nh5/43bkmps3a/png-transparent-male-avatar-boy-face-man-user-flat-classy-users-icon-thumbnail.png" alt="User Avatar" class="user-avatar">
            </div>
        </header>
    <div class="main-content" style="position: absolute;">
        <!-- Game Banner -->
       <!-- Game Banner (Clickable) -->
            <div class="banner" id="game-banner">
                <div class="banner-overlay">
                    <h1 id="game-title" style="font-family: Bree Serif;color: #E0E0E0;">game title</h1>
                    
                </div> 
            </div>
            <div class="container">
                    <div class="card content-card p-5" style="background-color: #202336;box-shadow: 0px 0px 10px rgba(0, 255, 255, 0.1);">
                        <div class="card-body">
                            <div class="game-info-container">
                                <img id="game-image" src="" alt="Game Cover Image">
                                <div class="game-info">
                                    <h2 id="game-title-info" style="font-family: Bree Serif;color: #E0E0E0;">Game Title</h2>
                                    <p id="game-genre" style="font-family: Bree Serif;color: #B0B3C0;">Genre</p>
                                    <p id="game-platforms" style="font-family: Bree Serif;color: #B0B3C0;">Platforms</p>
                                    <p id="game-rating" style="font-family: Bree Serif;color: #B0B3C0;">Game Rating</p>
                                    <p id="game-description" style="font-family: Bree Serif;color: #B0B3C0;">Description</p>
                                    <a id="buy-now-btn" class="buy-btn" target="_blank" style="font-family: Bree Serif;color: #B0B3C0;">Buy Now</a>
                                    <a id="add-to-list-btn" class="buy-btn" style="font-family: Bree Serif;color: #B0B3C0;">Add to list</a>
  
                                </div>
                            </div>
                            <!-- Ratings Breakdown Section -->
                            <div id="ratings-section" class="ratings-container p-3" style="background-color: #202336;">
                                <h3 class="section-title" style="font-family: Bree Serif;color: #E0E0E0;">Global Player Ratings</h3>
                                <div class="ratings-header">
                                    <span id="average-rating" class="average-rating" style="font-family: Bree Serif;color: #E0E0E0;">N/A</span>
                                    <span class="stars" id="star-rating"></span>
                                    <span id="total-ratings" class="total-ratings" style="font-family: Bree Serif;color: #E0E0E0;">0 ratings</span>
                                </div>
                                <div id="ratings-breakdown" class="ratings-breakdown"></div>
                            </div>

                            <style>
                                .ratings-container {
                                    background-color: #1c1c1e;
                                    padding: 15px;
                                    border-radius: 8px;
                                    margin-bottom: 20px;
                                }
                                .ratings-header {
                                    display: flex;
                                    align-items: center;
                                    gap: 10px;
                                }
                                .average-rating {
                                    font-size: 24px;
                                    font-weight: bold;
                                    color: white;
                                }
                                .stars {
                                    font-size: 18px;
                                    color: gold;
                                }
                                .total-ratings {
                                    font-size: 14px;
                                    color: gray;
                                }
                                .ratings-breakdown {
                                    margin-top: 10px;
                                }
                                .rating-bar {
                                    display: flex;
                                    align-items: center;
                                    margin-bottom: 5px;
                                }
                                .rating-bar span {
                                    font-size: 14px;
                                    color: white;
                                }
                                .bar {
                                    height: 6px;
                                    background-color: gray;
                                    margin: 0 10px;
                                    border-radius: 3px;
                                }
                            </style>
                            
                            <h2 style="font-family: Bree Serif;color: #E0E0E0;">Developers</h2>
                            <div id="developers-list" class="mt-4" style="font-family: Bree Serif;color: #B0B3C0;"></div>
            
                            <h2 class="text-white mt-5" style="font-family: Bree Serif;color: #E0E0E0;">Game Screenshots</h2>
                            <div id="screenshotCarousel" class="carousel slide mt-5" data-bs-ride="carousel">
                                <div class="carousel-inner" id="screenshot-carousel-inner"></div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#screenshotCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#screenshotCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                </button>
                            </div>
                            
            
                            <div id="system-requirements" class="mt-5">
                                <h3 style="font-family: Bree Serif;color: #E0E0E0;">System Requirements</h3>
                                <div class="requirements-container mt-4">
                                    <div id="min-requirements" class="requirements-box">
                                        <h5 style="font-family: Bree Serif;color: #E0E0E0;">Minimum</h5>
                                        <p id="min-reqs-text" style="font-family: Bree Serif;color: #B0B3C0;">Loading...</p>
                                    </div>
                                    <div id="rec-requirements" class="requirements-box">
                                        <h5 style="font-family: Bree Serif;color: #E0E0E0;">Recommended</h5>
                                        <p id="rec-reqs-text" style="font-family: Bree Serif;color: #B0B3C0;">Loading...</p>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                
            </div> 
            <!-- Modal -->
           <!-- Modal for Adding Game to List -->
           <div id="gameListModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Add Game to My List</h2>

                <label for="gameStatus">Status:</label>
                <select id="gameStatus">
                    <option value="playing">Playing</option>
                    <option value="completed">Completed</option>
                    <option value="dropped">Dropped</option>
                    <option value="wishlist">Wishlist</option>
                </select>

                <label for="gameRating">Rating:</label>
                <select id="gameRating">
                    <option value="Select">Select</option>
                    <option value="10">10 - Masterpiece</option>
                    <option value="9">9 - Great</option>
                    <option value="8">8 - Very Good</option>
                    <option value="7">7 - Good</option>
                    <option value="6">6 - Fine</option>
                    <option value="5">5 - Average</option>
                    <option value="4">4 - Bad</option>
                    <option value="3">3 - Very Bad</option>
                    <option value="2">2 - Horrible</option>
                    <option value="1">1 - Appalling</option>
                </select>

                <label for="gameNotes">Notes:</label>
                <textarea id="gameNotes" placeholder="Add notes (optional)"></textarea>

                <div class="modal-buttons">
                    <button id="cancelBtn">Cancel</button>
                    <button id="saveGameBtn">Submit</button>
                </div>
            </div>
        </div>

                
    </div>

    <script>
     const API_KEY = "c5082b657a834213a7791b7ea25f9332";
    const gameSlug = new URLSearchParams(window.location.search).get("game");
    
    async function fetchGameDetails(slug) {
        if (!slug) {
            console.error("No game slug found in URL.");
            return;
        }
    
        try {
            const response = await fetch(`https://api.rawg.io/api/games/${slug}?key=${API_KEY}`);
            const game = await response.json();
    
            if (game.detail) {
                console.error("Error fetching game:", game.detail);
                return;
            }
            async function fetchGameDetails(slug) {
        if (!slug) {
            console.error("No game slug found in URL.");
            return;
        }

        try {
            const response = await fetch(`https://api.rawg.io/api/games/${slug}?key=${API_KEY}`);
            const game = await response.json();

            if (game.detail) {
                console.error("Error fetching game:", game.detail);
                return;
            }

            // üéÆ Update banner image and game details
            const banner = document.getElementById("game-banner");
            banner.style.backgroundImage = `url('${game.background_image}')`;
            document.getElementById("game-title").textContent = game.name;
            document.getElementById("game-title-info").textContent = game.name;
            document.getElementById("game-genre").innerHTML = `<strong style="color: #00FFFF;">Genre : </strong> ${game.genres.map(g => g.name).join(', ')}`;
            document.getElementById("game-platforms").innerHTML = `<strong style="color: #00FFFF;">Platforms : </strong> ${game.platforms.map(p => p.platform.name).join(', ')}`;
            document.getElementById("game-image").src = game.background_image;
            document.getElementById("game-image").alt = game.name;

            // ‚≠ê Display Metacritic Score
            document.getElementById("game-rating").innerHTML = `
                <strong style="color: #00FFFF;">Metacritic Score : </strong> 
                ${game.metacritic ? game.metacritic + "%" : "Not available"}
            `;

        } catch (error) {
            console.error("Error fetching game data:", error);
        }
    }
            // üéÆ Update banner image and game details
            document.getElementById("game-banner").style.backgroundImage = `url('${game.background_image}')`;
            document.getElementById("game-title").textContent = game.name;
            document.getElementById("game-title-info").textContent = game.name;
            document.getElementById("game-genre").innerHTML = `<strong style="color: #00FFFF;">Genre : </strong> ${game.genres.map(g => g.name).join(', ')}`;
            document.getElementById("game-platforms").innerHTML = `<strong style="color: #00FFFF;">Platforms : </strong> ${game.platforms.map(p => p.platform.name).join(', ')}`;
            document.getElementById("game-image").src = game.background_image;
            document.getElementById("game-image").alt = game.name;
    
            // ‚≠ê Display Metacritic Score
            document.getElementById("game-rating").innerHTML = `
                <strong style="color: #00FFFF;">Metacritic Score : </strong> 
                ${game.metacritic ? game.metacritic + "%" : "Not available"}
            `;
            
    
            // üìú Display Description with "View More" Button
            displayDescription(game);
    
            // üî• Display Ratings Breakdown
            displayRatings(game);
    
            // üõ†Ô∏è Fetch Developers
            fetchDevelopers(game.developers);
    
            // üì∏ Fetch Screenshots
            fetchScreenshots(slug);
    
            // üíª Fetch System Requirements
            displaySystemRequirements(game.platforms);
    
        } catch (error) {
            console.error("Error fetching game data:", error);
        }
    }
    
    // üìú Function to Display Description with Extra Info on "View More"
    function displayDescription(game) {
        const descriptionElement = document.getElementById("game-description");
        if (!descriptionElement) {
            console.error("Element with id 'game-description' not found!");
            return;
        }
    
        const fullDescription = game.description_raw || "No description available.";
        const shortDescription = fullDescription.split(" ").slice(0, 20).join(" ") + "...";
    
        descriptionElement.innerHTML = `<strong style="color: #00FFFF;">Description: </strong> ${shortDescription}`;
    
        const viewMoreButton = document.createElement("button");
        viewMoreButton.textContent = "View More";
        viewMoreButton.classList.add("view-more-btn");
    
        let isExpanded = false;
        viewMoreButton.addEventListener("click", () => {
    isExpanded = !isExpanded;
    descriptionElement.innerHTML = isExpanded
        ? `
            <strong style="color: #00FFFF;">Description : </strong> ${fullDescription} <br><br>
            <div style="margin-top: 0px;">
                <strong style="color: #00FFFF;">Release Date : </strong> <span>${game.released || "Not available"}</span>
            </div>
            <div style="margin-top: 14px;">
                <strong style="color: #00FFFF;">Average Playtime : </strong> <span>${game.playtime ? game.playtime + " hours" : "Not available"}</span>
            </div>
            <div style="margin-top: 14px;">
                <strong style="color: #00FFFF;">Players Added to Library : </strong> <span>${game.added ? game.added.toLocaleString() : "Not available"}</span>
            </div>
        `
        : `<strong style="color: #00FFFF;">Description:</strong> ${shortDescription}`;
    viewMoreButton.textContent = isExpanded ? "View Less" : "View More";
});

    
        descriptionElement.insertAdjacentElement("afterend", viewMoreButton);
    }
    
    // üéØ Function to Display Ratings Breakdown
    function displayRatings(game) {
        const ratings = game.ratings || [];
        const averageRating = game.rating || 0;
        const totalRatings = game.ratings_count || 0;
    
        document.getElementById("average-rating").textContent = averageRating.toFixed(2);
        document.getElementById("total-ratings").textContent = `${totalRatings.toLocaleString()} ratings`;
    
        const starContainer = document.getElementById("star-rating");
        starContainer.innerHTML = "‚≠ê".repeat(Math.round(averageRating));
    
        const ratingsBreakdown = document.getElementById("ratings-breakdown");
        ratingsBreakdown.innerHTML = "";
    
        ratings.forEach((rating) => {
            const percent = rating.percent || 0;
            const starCount = "‚≠ê".repeat(rating.title);
    
            const bar = document.createElement("div");
            bar.classList.add("rating-bar");
            bar.innerHTML = `
                <span>${starCount}</span>
                <div class="bar" style="width: ${percent}%; background-color: white;"></div>
                <span>${percent}%</span>
            `;
            ratingsBreakdown.appendChild(bar);
        });
    }
    
    // üõ†Ô∏è Function to Fetch and Display Developers
    async function fetchDevelopers(developers) {
        const developersList = document.getElementById("developers-list");
        if (!developersList) {
            console.error("Element with id 'developers-list' not found!");
            return;
        }
    
        developersList.innerHTML = "";
    
        if (!developers || developers.length === 0) {
            developersList.innerHTML = "<p>No developers found.</p>";
            return;
        }
    
        developers.forEach(dev => {
            const devCard = document.createElement("div");
            devCard.classList.add("developer-card");
            devCard.innerHTML = `
                <img src="https://assets.onecompiler.app/4398p3nh5/439f8je57/peakpx.jpg" 
                    alt="${dev.name}" class="developer-img">
                <h3>${dev.name}</h3>
                <p>Studio: ${dev.name}</p>
            `;
            developersList.appendChild(devCard);
        });
    }
    
    // üì∏ Function to Fetch and Display Screenshots
    async function fetchScreenshots(slug) {
    try {
        const response = await fetch(`https://api.rawg.io/api/games/${slug}/screenshots?key=${API_KEY}`);
        const data = await response.json();

        const carouselInner = document.getElementById("screenshot-carousel-inner");
        carouselInner.innerHTML = ""; // Clear old content

        if (!data.results || data.results.length === 0) {
            carouselInner.innerHTML = "<p>No screenshots available.</p>";
            return;
        }

        data.results.forEach((screenshot, index) => {
            const slide = document.createElement("div");
            slide.classList.add("carousel-item");
            if (index === 0) slide.classList.add("active");

            slide.innerHTML = `<img src="${screenshot.image}" class="d-block w-100" alt="Screenshot ${index + 1}">`;
            carouselInner.appendChild(slide);
        });

        // Reinitialize Bootstrap Carousel
        const carouselElement = document.getElementById("screenshotCarousel");
        if (carouselElement) {
            new bootstrap.Carousel(carouselElement, { interval: 3000, ride: "carousel" });
        }
    } catch (error) {
        console.error("Error fetching screenshots:", error);
    }
}
    function displaySystemRequirements(platforms) {
    const minReqsText = document.getElementById("min-reqs-text");
    const recReqsText = document.getElementById("rec-reqs-text");

    minReqsText.innerHTML = "No minimum requirements available.";
    recReqsText.innerHTML = "No recommended requirements available.";

    if (!platforms || platforms.length === 0) {
        console.error("No platform data available.");
        return;
    }

    platforms.forEach(platform => {
        if (platform.platform.name.toLowerCase().includes("pc") && platform.requirements) {
            if (platform.requirements.minimum) {
                minReqsText.innerHTML = platform.requirements.minimum.replace(/\n/g, "<br>");
            }
            if (platform.requirements.recommended) {
                recReqsText.innerHTML = platform.requirements.recommended.replace(/\n/g, "<br>");
            }
        }
    });
}
document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("gameListModal");
    const addToListBtn = document.getElementById("add-to-list-btn");
    const closeBtn = document.querySelector(".close");
    const cancelBtn = document.getElementById("cancelBtn");
    const saveBtn = document.getElementById("saveGameBtn");

    // Show modal when clicking "Add to My List"
    addToListBtn.addEventListener("click", () => {
        modal.style.display = "block";
    });

    // Close modal when clicking the close button or cancel
    closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
    });

    cancelBtn.addEventListener("click", () => {
        modal.style.display = "none";
    });

    // Save game details when clicking "Submit"
    document.getElementById("saveGameBtn").addEventListener("click", function () {
    const gameTitle = document.getElementById("game-title-info").textContent;
    const gameImage = document.getElementById("game-image").src; // Ensure this picks up the correct image
    const status = document.getElementById("gameStatus").value;
    const rating = document.getElementById("gameRating").value;
    const notes = document.getElementById("gameNotes").value;

    if (!gameImage || gameImage.includes("undefined")) {
        console.error("‚ùå Game Image is Undefined!");
        alert("Error: Game image not found.");
        return;
    }

    const gameData = { title: gameTitle, image: gameImage, slug: gameSlug,status, rating, notes };

    let myList = JSON.parse(localStorage.getItem("myGameList")) || [];
    myList.push(gameData);
    localStorage.setItem("myGameList", JSON.stringify(myList));

    alert(`${gameTitle} added to your list!`);



        // Close modal
        modal.style.display = "none";
    });

    // Close modal when clicking outside
    window.addEventListener("click", (event) => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
});
    // üöÄ Fetch Game Data
    if (gameSlug) {
        fetchGameDetails(gameSlug);
    } else {
        console.error("No game slug found in URL.");
    }
    document.addEventListener("DOMContentLoaded", function () {
    // Get the game ID from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const gameId = urlParams.get("id"); // Correct ID parameter

    if (!gameId) {
        document.getElementById("game-details").innerHTML = "<p style='color:white;'>Game not found.</p>";
        return;
    }

});
const apiKey = 'c5082b657a834213a7791b7ea25f9332';  
document.getElementById("categoryDropdown").addEventListener("click", () => {
  genreList.classList.toggle("d-none");
});
// Fetch Genres from RAWG API
async function fetchGenres() {
  const response = await fetch(`https://api.rawg.io/api/genres?key=${apiKey}`);
  const data = await response.json();
  displayGenres(data.results);
}

// Display Genres as Checkboxes
function displayGenres(genres) {
  genreList.innerHTML = "";
  genres.forEach((genre) => {
    const genreItem = document.createElement("div");
    genreItem.classList.add("genre-item");
    genreItem.innerHTML = `
      <input type="checkbox" value="${genre.id}" class="genre-checkbox"> 
      ${genre.name}
    `;
    genreItem.querySelector("input").addEventListener("change", (e) => {
      if (e.target.checked) {
        selectedGenres.add(e.target.value);
      } else {
        selectedGenres.delete(e.target.value);
      }
      filterGames();
    });
    genreList.appendChild(genreItem);
  });
}


// Fetch and Filter Games Based on Selected Genres
async function filterGames() {
  if (selectedGenres.size === 0) return; // No filter applied
  const genreQuery = Array.from(selectedGenres).join(",");
  const response = await fetch(`https://api.rawg.io/api/games?key=${apiKey}&genres=${genreQuery}`);
  const data = await response.json();
  displayFilteredGames(data.results);
}
function displayFilteredGames(games) {
  console.log("Filtered Games:", games); // Replace with actual UI update logic
}

// Initialize
fetchGenres();
function displayGenres(genres) {
    genreList.innerHTML = "";
    genres.forEach((genre) => {
        const genreItem = document.createElement("div");
        genreItem.classList.add("genre-item");

        genreItem.innerHTML = `<a href="categories.html?genre=${genre.id}" class="genre-link">${genre.name}</a>`;

        genreList.appendChild(genreItem);
    });
}
        const searchInput = document.getElementById("search-input");
    const searchDropdown = document.getElementById("search-dropdown");

    searchInput.addEventListener("input", async function () {
        let query = searchInput.value.trim();

        if (query.length > 2) {
            searchDropdown.style.display = "block";
            fetchSearchResults(query);
        } else {
            searchDropdown.style.display = "none";
        }
    });

    async function fetchSearchResults(query) {
        try {
            const response = await fetch(`https://api.rawg.io/api/games?key=${API_KEY}&search=${query}&page_size=5`);
            const data = await response.json();

            if (data.results) {
                displaySearchSuggestions(data.results);
            }
        } catch (error) {
            console.error("Error fetching search results:", error);
        }
    }

    function displaySearchSuggestions(games) {
        searchDropdown.innerHTML = ""; // Clear previous results

        games.forEach(game => {
            const suggestionItem = document.createElement("div");
            suggestionItem.classList.add("search-suggestion");
            suggestionItem.innerText = game.name;

            suggestionItem.addEventListener("click", () => {
                searchInput.value = "";  // Clears the search bar
                searchDropdown.style.display = "none"; // Hide dropdown
                window.location.href = `game-details.html?game=${game.slug}`;
            });

            searchDropdown.appendChild(suggestionItem);
        });

        searchDropdown.style.display = "block"; // Show dropdown
    }

    // ‚úÖ Hide search dropdown when clicking outside
    document.addEventListener("click", (event) => {
        if (!searchInput.contains(event.target) && !searchDropdown.contains(event.target)) {
            searchDropdown.style.display = "none";
        }
    });

    </script>
    
    
    

</body>
</html>
